<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mdi command &mdash; LAMMPS documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/lammps.css" type="text/css" />
    <link rel="shortcut icon" href="_static/lammps.ico"/>
    <link rel="canonical" href="https://docs.lammps.org/mdi.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script async="async" src="_static/mathjax/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="min_modify command" href="min_modify.html" />
    <link rel="prev" title="mass command" href="mass.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="Manual.html">
            <img src="_static/lammps-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="lammps_version">Version: <b>8 Feb 2023</b></div>
              <div class="lammps_release">git info: 8Feb2023</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">11. Errors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programmer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Library.html">1. LAMMPS Library Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">2. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">3. Modifying &amp; extending LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Developer.html">4. Information for Developers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="commands_list.html">Commands</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="angle_coeff.html">angle_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="angle_style.html">angle_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="angle_write.html">angle_write command</a></li>
<li class="toctree-l2"><a class="reference internal" href="atom_modify.html">atom_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="atom_style.html">atom_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="balance.html">balance command</a></li>
<li class="toctree-l2"><a class="reference internal" href="bond_coeff.html">bond_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="bond_style.html">bond_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="bond_write.html">bond_write command</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">boundary command</a></li>
<li class="toctree-l2"><a class="reference internal" href="change_box.html">change_box command</a></li>
<li class="toctree-l2"><a class="reference internal" href="clear.html">clear command</a></li>
<li class="toctree-l2"><a class="reference internal" href="comm_modify.html">comm_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="comm_style.html">comm_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute.html">compute command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_modify.html">compute_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_atoms.html">create_atoms command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_bonds.html">create_bonds command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_box.html">create_box command</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete_atoms.html">delete_atoms command</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete_bonds.html">delete_bonds command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dielectric.html">dielectric command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dihedral_coeff.html">dihedral_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dihedral_style.html">dihedral_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dihedral_write.html">dihedral_write command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dimension.html">dimension command</a></li>
<li class="toctree-l2"><a class="reference internal" href="displace_atoms.html">displace_atoms command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html">dump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-vtk-command"><span class="xref std std-doc">dump vtk</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-h5md-command"><span class="xref std std-doc">dump h5md</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-molfile-command"><span class="xref std std-doc">dump molfile</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-netcdf-command"><span class="xref std std-doc">dump netcdf</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-image-command"><span class="xref std std-doc">dump image</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-movie-command"><span class="xref std std-doc">dump movie</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-atom-adios-command"><span class="xref std std-doc">dump atom/adios</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-custom-adios-command"><span class="xref std std-doc">dump custom/adios</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-cfg-uef-command"><span class="xref std std-doc">dump cfg/uef</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_adios.html">dump atom/adios  command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_adios.html#dump-custom-adios-command">dump custom/adios command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_cfg_uef.html">dump cfg/uef command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_h5md.html">dump h5md command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html">dump image command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html#dump-movie-command">dump movie command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html#dump-modify-options-for-dump-image-movie">dump_modify options for dump image/movie</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_modify.html">dump_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_modify.html#dump-modify-command-for-image-movie-options"><span class="xref std std-doc">dump_modify</span> command for image/movie options</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_molfile.html">dump molfile command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_netcdf.html">dump netcdf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_netcdf.html#dump-netcdf-mpiio-command">dump netcdf/mpiio command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_vtk.html">dump vtk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dynamical_matrix.html">dynamical_matrix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="echo.html">echo command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix.html">fix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_modify.html">fix_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fitpod_command.html">fitpod command</a></li>
<li class="toctree-l2"><a class="reference internal" href="group.html">group command</a></li>
<li class="toctree-l2"><a class="reference internal" href="group2ndx.html">group2ndx command</a></li>
<li class="toctree-l2"><a class="reference internal" href="group2ndx.html#ndx2group-command">ndx2group command</a></li>
<li class="toctree-l2"><a class="reference internal" href="hyper.html">hyper command</a></li>
<li class="toctree-l2"><a class="reference internal" href="if.html">if command</a></li>
<li class="toctree-l2"><a class="reference internal" href="improper_coeff.html">improper_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="improper_style.html">improper_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="include.html">include command</a></li>
<li class="toctree-l2"><a class="reference internal" href="info.html">info command</a></li>
<li class="toctree-l2"><a class="reference internal" href="jump.html">jump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="kim_commands.html">kim command</a></li>
<li class="toctree-l2"><a class="reference internal" href="kspace_modify.html">kspace_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="kspace_style.html">kspace_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="label.html">label command</a></li>
<li class="toctree-l2"><a class="reference internal" href="labelmap.html">labelmap command</a></li>
<li class="toctree-l2"><a class="reference internal" href="lattice.html">lattice command</a></li>
<li class="toctree-l2"><a class="reference internal" href="log.html">log command</a></li>
<li class="toctree-l2"><a class="reference internal" href="mass.html">mass command</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mdi command</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restrictions">Restrictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#related-commands">Related commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default">Default</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="min_modify.html">min_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_spin.html">min_style spin command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_spin.html#min-style-spin-cg-command">min_style spin/cg command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_spin.html#min-style-spin-lbfgs-command">min_style spin/lbfgs command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html">min_style cg command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-hftn-command">min_style hftn command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-sd-command">min_style sd command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-quickmin-command">min_style quickmin command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-fire-command">min_style fire command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-spin-command"><span class="xref std std-doc">min_style spin</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-spin-cg-command"><span class="xref std std-doc">min_style spin/cg</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="min_style.html#min-style-spin-lbfgs-command"><span class="xref std std-doc">min_style spin/lbfgs</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimize.html">minimize command</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimize.html#minimize-kk-command">minimize/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="molecule.html">molecule command</a></li>
<li class="toctree-l2"><a class="reference internal" href="neb.html">neb command</a></li>
<li class="toctree-l2"><a class="reference internal" href="neb_spin.html">neb/spin command</a></li>
<li class="toctree-l2"><a class="reference internal" href="neigh_modify.html">neigh_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="neighbor.html">neighbor command</a></li>
<li class="toctree-l2"><a class="reference internal" href="newton.html">newton command</a></li>
<li class="toctree-l2"><a class="reference internal" href="next.html">next command</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html">package command</a></li>
<li class="toctree-l2"><a class="reference internal" href="pair_coeff.html">pair_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="pair_modify.html">pair_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="pair_style.html">pair_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="pair_write.html">pair_write command</a></li>
<li class="toctree-l2"><a class="reference internal" href="partition.html">partition command</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin.html">plugin command</a></li>
<li class="toctree-l2"><a class="reference internal" href="prd.html">prd command</a></li>
<li class="toctree-l2"><a class="reference internal" href="print.html">print command</a></li>
<li class="toctree-l2"><a class="reference internal" href="processors.html">processors command</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">python command</a></li>
<li class="toctree-l2"><a class="reference internal" href="quit.html">quit command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_data.html">read_data command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_dump.html">read_dump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_restart.html">read_restart command</a></li>
<li class="toctree-l2"><a class="reference internal" href="region.html">region command</a></li>
<li class="toctree-l2"><a class="reference internal" href="replicate.html">replicate command</a></li>
<li class="toctree-l2"><a class="reference internal" href="rerun.html">rerun command</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset_atoms.html">reset_atoms command</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset_timestep.html">reset_timestep command</a></li>
<li class="toctree-l2"><a class="reference internal" href="restart.html">restart command</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">run command</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_style.html">run_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html">set command</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html">shell command</a></li>
<li class="toctree-l2"><a class="reference internal" href="special_bonds.html">special_bonds command</a></li>
<li class="toctree-l2"><a class="reference internal" href="suffix.html">suffix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="tad.html">tad command</a></li>
<li class="toctree-l2"><a class="reference internal" href="temper.html">temper command</a></li>
<li class="toctree-l2"><a class="reference internal" href="temper_grem.html">temper/grem command</a></li>
<li class="toctree-l2"><a class="reference internal" href="temper_npt.html">temper/npt command</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermo.html">thermo command</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermo_modify.html">thermo_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermo_style.html">thermo_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="third_order.html">third_order command</a></li>
<li class="toctree-l2"><a class="reference internal" href="timer.html">timer command</a></li>
<li class="toctree-l2"><a class="reference internal" href="timestep.html">timestep command</a></li>
<li class="toctree-l2"><a class="reference internal" href="uncompute.html">uncompute command</a></li>
<li class="toctree-l2"><a class="reference internal" href="undump.html">undump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="unfix.html">unfix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html">units command</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable.html">variable command</a></li>
<li class="toctree-l2"><a class="reference internal" href="velocity.html">velocity command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_coeff.html">write_coeff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_data.html">write_data command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_dump.html">write_dump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_restart.html">write_restart command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dumps.html">Dump Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="Manual.html">LAMMPS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="Manual.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="commands_list.html">Commands</a></li>
      <li class="breadcrumb-item active">mdi command</li>
      <li class="wy-breadcrumbs-aside">
          <a href="https://www.lammps.org"><img src="_static/lammps-logo.png" width="64" height="16" alt="LAMMPS Homepage"></a> | <a href="Commands_all.html">Commands</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="mass.html" class="btn btn-neutral float-left" title="mass command" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="min_modify.html" class="btn btn-neutral float-right" title="min_modify command" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><span class="math notranslate nohighlight">\(\renewcommand{\AA}{\text{Å}}\)</span></p>
<section id="mdi-command">
<span id="index-0"></span><h1>mdi command<a class="headerlink" href="#mdi-command" title="Permalink to this heading">¶</a></h1>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h2>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">mdi</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">args</span>
</pre></div>
</div>
<ul>
<li><p>option = <em>engine</em> or <em>plugin</em> or <em>connect</em> or <em>exit</em></p>
<pre class="literal-block"><em>engine</em> args = zero or more keyword/args pairs
  keywords = <em>elements</em>
    <em>elements</em> args = N_1 N_2 ... N_ntypes
      N_1,N_2,...N_ntypes = atomic number for each of ntypes LAMMPS atom types
<em>plugin</em> args = name keyword value keyword value ...
  name = name of plugin library (e.g., <em>lammps</em> means a liblammps.so library will be loaded)
  keyword/value pairs in any order, some are required, some are optional
  keywords = <em>mdi</em> or <em>infile</em> or <em>extra</em> or <em>command</em>
    <em>mdi</em> value = args passed to MDI for driver to operate with plugins (required)
    <em>infile</em> value = filename the engine will read at start-up (optional)
    <em>extra</em> value = aditional command-line args to pass to engine library when loaded (optional)
    <em>command</em> value = a LAMMPS input script command to execute (required)
<em>connect</em> args = none
<em>exit</em> args = none</pre>
</li>
</ul>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">mdi</span><span class="w"> </span><span class="n">engine</span>
<span class="k">mdi</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">29</span>
<span class="k">mdi</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">lammps</span><span class="w"> </span><span class="n">mdi</span><span class="w"> </span><span class="s">&quot;-role ENGINE -name lammps -method LINK&quot;</span><span class="w"> </span><span class="o">&amp;</span>
<span class="w">           </span><span class="n">infile</span><span class="w"> </span><span class="n">in.aimd.engine</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="s">&quot;-log log.aimd.engine.plugin&quot;</span><span class="w"> </span><span class="o">&amp;</span>
<span class="w">           </span><span class="n">command</span><span class="w"> </span><span class="s">&quot;run 5&quot;</span>
<span class="k">mdi</span><span class="w"> </span><span class="n">connect</span>
<span class="k">mdi</span><span class="w"> </span><span class="n">exit</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This command implements operations within LAMMPS to use the <cite>MDI
Library &lt;https://molssi-mdi.github.io/MDI_Library/html/index.html&gt;</cite>
for coupling to other codes in a client/server protocol.</p>
<p>See the Howto MDI doc page for a discussion of all the different ways
2 or more codes can interact via MDI.</p>
<p>The examples/mdi directory has examples which use LAMMPS in 4
different modes: as a driver using an engine as either a stand-alone
code or as a plugin, and as an engine operating as either a
stand-alone code or as a plugin.  The README file in that directory
shows how to launch and couple codes for all the 4 usage modes, and so
they communicate via the MDI library using either MPI or sockets.</p>
<p>The scripts in that directory illustrate the use of all the options
for this command.</p>
<p>The <em>engine</em> option enables LAMMPS to act as an MDI engine (server),
responding to requests from an MDI driver (client) code.</p>
<p>The <em>plugin</em> option enables LAMMPS to act as an MDI driver (client),
and load the MDI engine (server) code as a library plugin.  In this
case the MDI engine is a library plugin.  An MDI engine can also be a
stand-alone code, launched separately from LAMMPS, in which case the
mdi plugin command is not used.</p>
<p>The <em>connect</em> and <em>exit</em> options are only used when LAMMPS is acting
as an MDI driver.  As explained below, these options are normally not
needed, except for a specific kind of use case.</p>
<hr class="docutils" />
<p>The <em>mdi engine</em> command is used to make LAMMPS operate as an MDI
engine.  It is typically used in an input script after LAMMPS has
setup the system it is going to model consistent with what the driver
code expects.  Depending on when the driver code tells the LAMMPS
engine to exit, other commands can be executed after this command, but
typically it is used at the end of a LAMMPS input script.</p>
<p>To act as an MDI engine operating as an MD code (or surrogate QM
code), this is the list of standard MDI commands issued by a driver
code which LAMMPS currently recognizes.  Using standard commands
defined by the MDI library means that a driver code can work
interchangeably with LAMMPS or other MD codes or with QM codes which
support the MDI standard.  See more details about these commands in
the <a class="reference external" href="https://molssi-mdi.github.io/MDI_Library/html/mdi_standard.html">MDI library documentation</a></p>
<p>These commands are valid at the &#64;DEFAULT node defined by MDI.
Commands that start with “&gt;” mean the driver is sending information to
LAMMPS.  Commands that start with “&lt;” are requests by the driver for
LAMMPS to send it information.  Commands that start with an alphabetic
letter perform actions.  Commands that start with “&#64;” are MDI “node”
commands, which are described further below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command name</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&gt;CELL or &lt;CELL</p></td>
<td><p>Send/request 3 simulation box edge vectors (9 values)</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;CELL_DISPL or &lt;CELL_DISPL</p></td>
<td><p>Send/request displacement of the simulation box from the origin (3 values)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;CHARGES or &lt;CHARGES</p></td>
<td><p>Send/request charge on each atom (N values)</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;COORDS or &lt;COORDS</p></td>
<td><p>Send/request coordinates of each atom (3N values)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;ELEMENTS</p></td>
<td><p>Send elements (atomic numbers) for each atom (N values)</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;ENERGY</p></td>
<td><p>Request total energy (potential + kinetic) of the system (1 value)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;FORCES or &lt;FORCES</p></td>
<td><p>Send/request forces on each atom (3N values)</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;+FORCES</p></td>
<td><p>Send forces to add to each atom (3N values)</p></td>
</tr>
<tr class="row-even"><td><p>&lt;LABELS</p></td>
<td><p>Request string label of each atom (N values)</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;MASSES</p></td>
<td><p>Request mass of each atom (N values)</p></td>
</tr>
<tr class="row-even"><td><p>MD</p></td>
<td><p>Perform an MD simulation for N timesteps (most recent &gt;NSTEPS value)</p></td>
</tr>
<tr class="row-odd"><td><p>OPTG</p></td>
<td><p>Perform an energy minimization to convergence (most recent &gt;TOLERANCE values)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;NATOMS or &lt;NATOMS</p></td>
<td><p>Sends/request number of atoms in the system (1 value)</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;NSTEPS</p></td>
<td><p>Send number of timesteps for next MD dynamics run via MD command</p></td>
</tr>
<tr class="row-even"><td><p>&lt;PE</p></td>
<td><p>Request potential energy of the system (1 value)</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;STRESS</p></td>
<td><p>Request symmetric stress tensor (virial) of the system (9 values)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;TOLERANCE</p></td>
<td><p>Send 4 tolerance parameters for next MD minimization via OPTG command</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;TYPES or &lt;TYPES</p></td>
<td><p>Send/request the LAMMPS atom type for each atom (N values)</p></td>
</tr>
<tr class="row-even"><td><p>&gt;VELOCITIES or &lt;VELOCITIES</p></td>
<td><p>Send/request the velocity of each atom (3N values)</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;INIT_MD or &#64;INIT_OPTG</p></td>
<td><p>Driver tells LAMMPS to start single-step dynamics or minimization (see below)</p></td>
</tr>
<tr class="row-even"><td><p>EXIT</p></td>
<td><p>Driver tells LAMMPS to exit engine mode</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The &lt;ENERGY, &lt;FORCES, &lt;PE, and &lt;STRESS commands trigger LAMMPS to
compute atomic interactions for the current configuration of atoms
and size/shape of the simulation box.  I.e. LAMMPS invokes its
pair, bond, angle, …, kspace styles.  If the driver is updating
the atom coordinates and/or box incrementally (as in an MD
simulation which the driver is managing), then the LAMMPS engine
will do the same, and only occasionally trigger neighbor list
builds.  If the change in atom positions is large (since the
previous &gt;COORDS command), then LAMMPS will do a more expensive
operation to migrate atoms to new processors as needed and
re-neighbor.  If the &gt;NATOMS or &gt;TYPES or &gt;ELEMENTS commands have
been sent (since the previous &gt;COORDS command), then LAMMPS assumes
the system is new and re-initializes an entirely new simulation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The &gt;TYPES or &gt;ELEMENTS commands are how the MDI driver tells the
LAMMPS engine which LAMMPS atom type to assign to each atom.  If
both the MDI driver and the LAMMPS engine are initialized so that
atom type values are consistent in both codes, then the &gt;TYPES
command can be used.  If not, the optional <em>elements</em> keyword can
be used to specify what element each LAMMPS atom type corresponds
to.  This is specified by the atomic number of the element (e.g., 13
for Al).  An atomic number must be specified for each of the ntypes
LAMMPS atom types.  Ntypes is typically specified via the
create_box command or in the data file read by the read_data
command.  In this has been done, the MDI driver can send an
&gt;ELEMENTS command to the LAMMPS driver with the atomic number of
each atom.</p>
</div>
<p>The MD and OPTG commands perform an entire MD simulation or energy
minimization (to convergence) with no communication from the driver
until the simulation is complete.  By contrast, the &#64;INIT_MD and
&#64;INIT_OPTG commands allow the driver to communicate with the engine at
each timestep of a dynamics run or iteration of a minimization; see
more info below.</p>
<p>The MD command performs a simulation using the most recent &gt;NSTEPS
value.  The OPTG command performs a minimization using the 4
convergence parameters from the most recent &gt;TOLERANCE command.  The 4
parameters sent are those used by the <a class="reference internal" href="minimize.html"><span class="doc">minimize</span></a>
command in LAMMPS: etol, ftol, maxiter, and maxeval.</p>
<p>The mdi engine command also implements the following custom MDI
commands which are LAMMPS-specific.  These commands are also valid at
the &#64;DEFAULT node defined by MDI:</p>
<blockquote>
<div><ul class="simple">
<li><ul>
<li><p>Command name</p></li>
<li><p>Action</p></li>
</ul>
</li>
<li><ul>
<li><p>&gt;NBYTES</p></li>
<li><p>Send # of datums in a subsequent command (1 value)</p></li>
</ul>
</li>
<li><ul>
<li><p>&gt;COMMAND</p></li>
<li><p>Send a LAMMPS input script command as a string (Nbytes in length)</p></li>
</ul>
</li>
<li><ul>
<li><p>&gt;COMMANDS</p></li>
<li><p>Send multiple LAMMPS input script commands as a newline-separated string (Nbytes in length)</p></li>
</ul>
</li>
<li><ul>
<li><p>&gt;INFILE</p></li>
<li><p>Send filename of an input script to execute (filename Nbytes in length)</p></li>
</ul>
</li>
<li><ul>
<li><p>&lt;KE</p></li>
<li><p>Request kinetic energy of the system (1 value)</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Note that other custom commands can easily be added if these are not
sufficient to support what a user-written driver code needs.  Code to
support new commands can be added to the MDI package within LAMMPS,
specifically to the src/MDI/mdi_engine.cpp file.</p>
<p>MDI also defines a standard mechanism for the driver to request that
an MD engine (LAMMPS) perform a dynamics simulation one step at a time
or an energy minimization one iteration at a time.  This is so that
the driver can (optionally) communicate with LAMMPS at intermediate
points of the timestep or iteration by issuing MDI node commands which
start with “&#64;”.</p>
<p>To tell LAMMPS to run dynamics in single-step mode, the driver sends
as &#64;INIT_MD command followed by the these commands.  The driver
can interact with LAMMPS at 3 node locations within each
timestep: &#64;COORDS, &#64;FORCES, &#64;ENDSTEP:</p>
<blockquote>
<div><ul class="simple">
<li><ul>
<li><p>Command name</p></li>
<li><p>Action</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;COORDS</p></li>
<li><p>Proceed to next &#64;COORDS node = post-integrate location in LAMMPS timestep</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;FORCES</p></li>
<li><p>Proceed to next &#64;FORCES node = post-force location in LAMMPS timestep</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;ENDSTEP</p></li>
<li><p>Proceed to next &#64;ENDSTEP node = end-of-step location in LAMMPS timestep</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;DEFAULT</p></li>
<li><p>Exit MD simulation, return to &#64;DEFAULT node</p></li>
</ul>
</li>
<li><ul>
<li><p>EXIT</p></li>
<li><p>Driver tells LAMMPS to exit the MD simulation and engine mode</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>To tell LAMMPS to run an energy minimization in single-iteration mode.
The driver can interact with LAMMPS at 2 node locations within each
iteration of the minimizer: &#64;COORDS, &#64;FORCES:</p>
<blockquote>
<div><ul class="simple">
<li><ul>
<li><p>Command name</p></li>
<li><p>Action</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;COORDS</p></li>
<li><p>Proceed to next &#64;COORDS node = min-pre-force location in LAMMPS min iteration</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;FORCES</p></li>
<li><p>Proceed to next &#64;FORCES node = min-post-force location in LAMMPS min iteration</p></li>
</ul>
</li>
<li><ul>
<li><p>&#64;DEFAULT</p></li>
<li><p>Exit minimization, return to &#64;DEFAULT node</p></li>
</ul>
</li>
<li><ul>
<li><p>EXIT</p></li>
<li><p>Driver tells LAMMPS to exit the minimization and engine mode</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>While LAMMPS is at its &#64;COORDS node, the following standard MDI
commands are supported, as documented above: &gt;COORDS or &lt;COORDS,
&#64;COORDS, &#64;FORCES, &#64;ENDSTEP, &#64;DEFAULT, EXIT.</p>
<p>While LAMMPS is at its &#64;FORCES node, the following standard MDI
commands are supported, as documented above: &lt;COORDS, &lt;ENERGY, &gt;FORCES
or &gt;+FORCES or &lt;FORCES, &lt;KE, &lt;PE, &lt;STRESS, &#64;COORDS, &#64;FORCES, &#64;ENDSTEP,
&#64;DEFAULT, EXIT.</p>
<p>While LAMMPS is at its &#64;ENDSTEP node, the following standard MDI
commands are supported, as documented above: &lt;ENERGY, &lt;FORCES, &lt;KE,
&lt;PE, &lt;STRESS, &#64;COORDS, &#64;FORCES, &#64;ENDSTEP, &#64;DEFAULT, EXIT.</p>
<hr class="docutils" />
<p>The <em>mdi plugin</em> command is used to make LAMMPS operate as an MDI
driver which loads an MDI engine as a plugin library.  It is typically
used in an input script after LAMMPS has setup the system it is going
to model consistent with the engine code.</p>
<p>The <em>name</em> argument specifies which plugin library to load.  A name
like “lammps” is converted to a filename liblammps.so.  The path for
where this file is located is specified by the -plugin_path switch
within the -mdi command-line switch, which is specified when LAMMPS is
launched.  See the examples/mdi/README files for examples of how this
is done.</p>
<p>The <em>mdi</em> keyword is required and is used as the -mdi argument passed
to the library when it is launched.  The -role and -method settings
are required.  The -name setting can be anything you choose.  MDI
drivers and engines can query their names to verify they are values
they expect.</p>
<p>The <em>infile</em> keyword is optional.  It sets the name of an input script
which the engine will open and process.  MDI will pass it as a
command-line argument to the library when it is launched.  The file
typically contains settings that an MD or QM code will use for its
calculations.</p>
<p>The <em>extra</em> keyword is optional.  It contains additional command-line
arguments which MDI will pass to the library when it is launched.</p>
<p>The <em>command</em> keyword is required.  It specifies a LAMMPS input script
command (as a single argument in quotes if it is multiple words).
Once the plugin library is launched, LAMMPS will execute this command.
Other previously-defined commands in the input script, such as the
<a class="reference internal" href="fix_mdi_qm.html"><span class="doc">fix mdi/qm</span></a> command, should perform MDI
communication with the engine, while the specified <em>command</em> executes.
Note that if <em>command</em> is an <a class="reference internal" href="include.html"><span class="doc">include</span></a> command, then it
could specify a filename with multiple LAMMPS commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the <em>command</em> is complete, LAMMPS will send an MDI EXIT
command to the plugin engine and the plugin will be removed.  The
“mdi plugin” command will then exit and the next command (if any)
in the LAMMPS input script will be processed.  A subsequent “mdi
plugin” command could then load the same or a different MDI
plugin if desired.</p>
</div>
<hr class="docutils" />
<p>The <em>mdi connect</em> and <em>mdi exit</em> commands are only used when LAMMPS is
operating as an MDI driver.  And when other LAMMPS command(s) which
send MDI commands and associated data to/from the MDI engine are not
able to initiate and terminate the connection to the engine code.</p>
<p>The only current MDI driver command in LAMMPS is the <a class="reference internal" href="fix_mdi_qm.html"><span class="doc">fix mdi/qm</span></a> command.  If it is only used once in an input script
then it can initiate and terminate the connection, but if it is being
issued multiple times (e.g., in a loop that issues a <a class="reference internal" href="clear.html"><span class="doc">clear</span></a> command), then it cannot initiate or terminate the connection
multiple times.  Instead, the <em>mdi connect</em> and <em>mdi exit</em> commands
should be used outside the loop to initiate or terminate the connection.</p>
<p>See the examples/mdi/in.series.driver script for an example of how
this is done.  The LOOP in that script is reading a series of data
file configurations and passing them to an MDI engine (e.g., quantum
code) for energy and force evaluation.  A <em>clear</em> command inside the
loop wipes out the current system so a new one can be defined.  This
operation also destroys all fixes.  So the <a class="reference internal" href="fix_mdi_qm.html"><span class="doc">fix mdi/qm</span></a> command is issued once per loop iteration.  Note that it
includes a “connect no” option which disables the initiate/terminate
logic within that fix.</p>
</section>
<section id="restrictions">
<h2>Restrictions<a class="headerlink" href="#restrictions" title="Permalink to this heading">¶</a></h2>
<p>This command is part of the MDI package.  It is only enabled if LAMMPS
was built with that package.  See the <a class="reference internal" href="Build_package.html"><span class="doc">Build package</span></a> page for more info.</p>
<p>To use LAMMPS in conjunction with other MDI-enabled atomistic codes,
the <a class="reference internal" href="units.html"><span class="doc">units</span></a> command should be used to specify <em>real</em> or
<em>metal</em> units.  This will ensure the correct unit conversions between
LAMMPS and MDI units, which the other codes will also perform in their
preferred units.</p>
<p>LAMMPS can also be used as an MDI engine in other unit choices it
supports (e.g., <em>lj</em>), but then no unit conversion is performed.</p>
</section>
<section id="related-commands">
<h2>Related commands<a class="headerlink" href="#related-commands" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="fix_mdi_qm.html"><span class="doc">fix mdi/qm</span></a></p>
</section>
<section id="default">
<h2>Default<a class="headerlink" href="#default" title="Permalink to this heading">¶</a></h2>
<p>None</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mass.html" class="btn btn-neutral float-left" title="mass command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="min_modify.html" class="btn btn-neutral float-right" title="min_modify command" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2003-2023 Sandia Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>

        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>